<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Extract API &#8212; odoo 14.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/patchqueue.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/jquery.min.js"></script>
    <script src="../_static/bootstrap.js"></script>
    <script src="../_static/doc.js"></script>
    <script src="../_static/jquery.noconflict.js"></script>
    <script src="../_static/patchqueue.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:500,600" rel="stylesheet">
    <link rel="canonical" href="" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Setting Up" href="../setup.html" />
    <link rel="prev" title="Creating a Localization" href="localization.html" /> 
  </head><body><header class="o_main_header o_has_sub_nav o_inverted has_code_col">
    <div class="o_main_header_main">
      <a class="pull-left o_logo" href="/"></a>
      <a href="#" class="o_mobile_menu_toggle visible-xs-block pull-right">
        <span class="sr-only">Toggle navigation</span>
        <span class="mdi-navigation-menu"></span>
      </a>
      <div class="o_header_buttons">
        <a href="http://www.odoo.com/trial" class="btn btn-primary">Start Now</a>
      </div>
      <ul class="o_primary_nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle">Apps</a>
          <div class="dropdown-menu o_secondary_nav">
            <div class="container">
              <div class="row">
                <div class="col-sm-3 o_website_apps">
                  <div class="o_nav_app_family">
                    <span></span> Websites
                    <div>Build great user experience</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/website-builder">Website Builder</a></li>
                    <li><a href="https://www.odoo.com/page/e-commerce">eCommerce</a></li>
                    <li><a href="https://www.odoo.com/page/blog-engine">Blogs</a></li>
                    <li><a href="https://www.odoo.com/page/community-builder">Forums</a></li>
                    <li><a href="https://www.odoo.com/page/slides">Slides</a></li>
                    <li><a href="https://adspike.odoo.com">SEA</a></li>
                  </ul>
                </div>
                <div class="col-sm-3 o_sale_apps">
                  <div class="o_nav_app_family">
                    <span></span> Sales
                    <div>Boost your success rate</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/sales">Sales</a></li>
                    <li><a href="https://www.odoo.com/page/crm">CRM</a></li>
                    <li><a href="https://www.odoo.com/page/billing">Invoicing</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Point of Sale</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/point-of-sale">Shops</a></li>
                        <li><a href="https://www.odoo.com/page/pos-restaurant">Restaurants</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/subscriptions">Subscriptions</a></li>
                    <li><a href="https://www.odoo.com/page/sign">Sign</a></li>
                  </ul>
                </div>
                <div class="col-sm-3 o_operation_apps">
                  <div class="o_nav_app_family">
                    <span></span> Operations
                    <div>It's all about efficiency</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/accounting">Accounting</a></li>
                    <li><a href="https://www.odoo.com/page/project-management">Project</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Human Resources</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/recruitment">Recruitment</a></li>
                        <li><a href="https://www.odoo.com/page/employees">Employees</a></li>
                        <li><a href="https://www.odoo.com/page/expenses">Expenses</a></li>
                        <li><a href="https://www.odoo.com/page/appraisal">Appraisal</a></li>
                        <li><a href="https://www.odoo.com/page/fleet">Fleet</a></li>
                        <li><a href="https://www.odoo.com/page/leaves">Leaves</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/warehouse">Inventory</a></li>
                    <li><a href="https://www.odoo.com/page/purchase">Purchase</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Manufacturing</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/manufacturing">MRP</a></li>
                        <li><a href="https://www.odoo.com/page/plm">PLM</a></li>
                        <li><a href="https://www.odoo.com/page/maintenance">Maintenance</a></li>
                        <li><a href="https://www.odoo.com/page/quality">Quality</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="col-sm-3 o_productivity_apps">
                  <div class="o_nav_app_family">
                    <span></span> Productivity Tools
                    <div>Great Tools = Happy People</div>
                  </div>
                  <ul>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Communication</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/discuss">Discuss</a></li>
                        <li><a href="https://www.odoo.com/page/discuss-groups">Mailing Lists</a></li>
                        <li><a href="https://www.odoo.com/page/notes">Notes</a></li>
                        <li><a href="#">Help desk</a></li>
                        <li><a href="#">Appointment</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/timesheet">Timesheet</a></li>
                    <li><a href="https://www.odoo.com/page/email-marketing">Email Marketing</a></li>
                    <li><a href="https://www.odoo.com/page/events">Events</a></li>
                    <li><a href="https://www.odoo.com/page/survey">Survey</a></li>
                    <li><a href="https://www.odoo.com/page/live-chat">Live Chat</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <a href="http://www.odoo.com/apps/modules" class="o_store_link"><i class="fa fa-cube fa-fw"></i> Third party apps</a>
          </div>
        </li>
        <li><a href="https://www.odoo.com/page/tour">Tour</a></li>
        <li><a href="https://www.odoo.com/pricing">Pricing</a></li>
        <li><a href="https://www.odoo.com/page/docs">Docs</a></li>
      </ul>
    </div>
    <nav class="navbar o_sub_nav">
      <div class="container">
        <div class="navbar-header visible-xs">
            <button type="button" class="navbar-toggle collapsed text-left btn-block" data-toggle="collapse" data-target="#o_sub-menu" aria-expanded="false">
              Navigate
              <span class="mdi-hardware-keyboard-arrow-down pull-right"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="o_sub-menu">
          <ol class="o_breadcrumb breadcrumb nav navbar-left">
              
              





    
        
            <li><a href="../index.html">Developer Doc</a></li>
        
    
    <li class="active"><a href="#">Extract API</a></li>

              
          </ol>

          <div class="call-to-action navbar-right hidden-xs">
            <a href="http://www.odoo.com/trial" class="btn btn-primary">Start Now</a>
          </div>

          <ul class="navbar-nav navbar-right nav o_sub_nav_actions">
            
              <li class="divider"></li>
            

            
            


            
          </ul>

          <ul class="nav navbar-nav navbar-right">
            

            
            

<li><a href="https://www.odoo.com/documentation/user/14.0/index.html">User</a></li>
<li><a href="https://www.odoo.com/documentation/14.0/index.html">Developer</a></li>
<li><a href="https://www.odoo.com/documentation/14.0/setup/install.html">Installation</a></li>
<li><a href="https://odoo.com/slides">eLearning</a></li>
<li><a href="https://www.odoo.com/page/odoo-white-paper">White Papers</a></li>
<li><a href="https://www.odoo.com/page/legal">Legal</a></li>
<li id="searchbox" style="display: none; margin: 0 0 0 10px;" role="search">
    <form class="search form-inline input-group-sm" action="../search.html" method="get">
        <input type="text" class="form-control" name="q" id="q" placeholder="Search..." />
        <input type="hidden" name="area" value="default" />
        <input type="hidden" name="check_keywords" value="yes" />
        <button type="submit" value="Go" class="btn btn-default btn-sm">Go</button>
    </form>
</li>
<script type="text/javascript">$('#searchbox').show(0);</script>
            

            
          </ul>
        </div>
      </div>
    </nav>
  </header><div id="wrap" class="has_code_col">
    
    
    
    <figure class="card top has_banner">
      <span class="card-img" style="background-image: url('../_static/banners/extract_api.jpg');"></span>
      <div class="container text-center">
        <h1> Extract API </h1>
      </div>
    </figure>
    
    
    
      <main class="container has_code_col">
        
        <div class="o_content row">
          
          <aside>
            <div class="navbar-aside text-center">
              <ul class="text-left list-group nav"><li class="list-group-item"><a href="#invoices" class="ripple reference internal">Invoices</a><ul ><li class="list-group-item"><a href="#expected-successful-flow" class="ripple reference internal">Expected successful flow</a></li><li class="list-group-item"><a href="#routes" class="ripple reference internal">Routes</a><ul ><li class="list-group-item"><a href="#iap-invoice-extract-parse" class="ripple reference internal"><code >/iap/invoice_extract/parse</code></a><ul ><li class="list-group-item"><a href="#description" class="ripple reference internal">Description</a></li><li class="list-group-item"><a href="#request-body" class="ripple reference internal">Request Body</a></li><li class="list-group-item"><a href="#response" class="ripple reference internal">Response</a></li></ul></li><li class="list-group-item"><a href="#iap-invoice-extract-get-results" class="ripple reference internal"><code >/iap/invoice_extract/get_results</code></a><ul ><li class="list-group-item"><a href="#id1" class="ripple reference internal">Description</a></li><li class="list-group-item"><a href="#id2" class="ripple reference internal">Request Body</a></li><li class="list-group-item"><a href="#id3" class="ripple reference internal">Response</a></li></ul></li><li class="list-group-item"><a href="#feature-result" class="ripple reference internal"><code >feature_result</code></a></li><li class="list-group-item"><a href="#candidate" class="ripple reference internal"><code >candidate</code></a></li><li class="list-group-item"><a href="#feature-result-for-the-invoice-lines-feature" class="ripple reference internal"><code >feature_result</code> for the <code >invoice_lines</code> feature</a></li><li class="list-group-item"><a href="#iap-invoice-extract-validate" class="ripple reference internal"><code >/iap/invoice_extract/validate</code></a><ul ><li class="list-group-item"><a href="#id4" class="ripple reference internal">Description</a></li><li class="list-group-item"><a href="#id5" class="ripple reference internal">Request Body</a></li></ul></li><li class="list-group-item"><a href="#validation" class="ripple reference internal"><code >validation</code></a></li><li class="list-group-item"><a href="#validation-for-global-taxes" class="ripple reference internal">validation for <code >global_taxes</code></a></li><li class="list-group-item"><a href="#validation-for-invoice-lines" class="ripple reference internal">validation for <code >invoice_lines</code></a></li></ul></li><li class="list-group-item"><a href="#id6" class="ripple reference internal">Response</a></li></ul></li><li class="list-group-item"><a href="#integration-testing" class="ripple reference internal">Integration Testing</a></li></ul>
              
              <p class="gith-container"><a href="https://github.com/odoo/odoo/edit/14.0/doc/webservices/extract_api.rst" class="gith-link">
                  Edit on GitHub
              </a></p>
              
            </div>
          </aside>
          
          <article class="doc-body ">
            
            
  <section id="extract-api"><p >Odoo provides a service allowing you to automate the processing of your invoices. The service scans your document using an Optical
Character Recognition (OCR) engine and then uses AI-based algorithms to extract the fields of interest such as the total, the due date, or
the invoice lines. More functional information can be found on the <a href="https://www.odoo.com/page/invoice-automation" class="external reference">demo page</a>.</p><p >This service is a paid service. Each invoice processing will cost you one credit. Three different sized packs can be bought on <a href="https://iap.odoo.com/iap/in-app-services/259?sortby=date" class="external reference">iap.odoo.com</a>.</p><p >You can either use this service directly in the Odoo Accounting App or through the API. The Extract API which is detailed in the next section
allows you to integrate our service directly into your own projects.</p></section><section id="invoices"><h2 >Invoices</h2><p >The extract API use the <a href="https://www.jsonrpc.org/specification" class="external reference">JSON-RPC2</a> protocol. The diffent routes are located at the following address: <strong >https://iap-extract.odoo.com</strong>.</p></section><section id="expected-successful-flow"><h3 >Expected successful flow</h3><ol ><li >Call <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/iap/invoice_extract/parse</span></a> to submit your invoices (one call for each invoice). On success, you receive a <code >document_id</code> in the response.</li><li >You then have to regularly poll <a href="#webservices-extract-api-invoice-get-results" class="reference internal"><span class="std-ref std">/iap/invoice_extract/get_results</span></a> to get the document’s parsing status.</li><li >Once the result received, you can validate it by calling <a href="#webservices-extract-api-invoice-validate" class="reference internal"><span class="std-ref std">/iap/invoice_extract/validate</span></a> and sending the expected values.
This step is optional but greatly helps the system to improve.</li></ol><p >These 3 routes are detailed in this <a href="#webservices-extract-api-routes" class="reference internal"><span class="std-ref std">section</span></a>. The HTTP POST method should be used for all of them. A python implementation of the full flow
can be found <a class="reference download internal" href="../_downloads/ca8fc9e87f0da0b974fa1b9c014ecbc0/extract_api_implementation.py" download="">here</a> and a token for integration testing is provided in the <a href="#webservices-extract-api-integration-testing" class="reference internal"><span class="std-ref std">integration testing section</span></a>.</p></section><section id="routes"><i id="webservices-extract-api-routes"></i><h3 >Routes</h3></section><section id="iap-invoice-extract-parse"><i id="webservices-extract-api-invoice-parse"></i><h4 ><code >/iap/invoice_extract/parse</code></h4></section><section id="description"><h5 >Description</h5><p >Request a processing of the document from the OCR. The route will return a <code >document_id</code> you can use to obtain the result of your request.</p></section><section id="request-body"><h5 >Request Body</h5><dl ><dt ><code >jsonrpc</code> (required)</dt><dd >Must be exactly “2.0”.</dd><dt ><code >method</code> (required)</dt><dd >Must be “call”.</dd><dt ><code >id</code> (required)</dt><dd >An identifier established by the client. It allows the client to keep track of which response goes with which request. This makes asynchronous calls easier.</dd><dt ><code >params</code></dt><dd ><dl ><dt ><code >account_token</code> (required)</dt><dd >The token of the account from which credits will be taken. Each successful call costs one token.</dd><dt ><code >version</code> (optional)</dt><dd >The version will determine the format of your requests and the format of the server response. Some results can be unavailable in older versions. For the current
version 1.2.0, send ‘120’. If not specified, the latest version will be used.</dd><dt ><code >documents</code> (required)</dt><dd >The invoice must be provided as a string in the ASCII encoding. The list should contain only one string. If multiple strings are provided only the first string
corresponding to a pdf will be processed. If no pdf is found, the first string will be processed. This field is a list only for legacy reasons. The supported extensions
are <em >pdf</em>, <em >png</em>, <em >jpg</em> and <em >bmp</em>.</dd><dt ><code >user_infos</code> (required)</dt><dd ><p >Information concerning the person to whom the invoice is intended. This informations is not required in order for the service to work but it greatly improves the quality of the result.</p><dl ><dt ><code >user_company_vat</code> (optional)</dt><dd >VAT number of the client.</dd><dt ><code >user_company_name</code> (optional)</dt><dd >Name of the client’s company.</dd><dt ><code >user_company_country_code</code> (optional)</dt><dd >Country code of the client. Format: <a href="https://www.iban.com/country-codes" class="external reference">ISO3166 alpha-2</a>.</dd><dt ><code >user_lang</code> (optional)</dt><dd >The client language. Format: <em >language_code + _ + locale</em> (ex: fr_FR, en_US).</dd><dt ><code >user_email</code> (optional)</dt><dd >The client email.</dd></dl></dd></dl></dd></dl><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;account_token&quot;</span><span class="p">:</span> <span class="err">string</span> <span class="err">(hex)</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="err">int</span><span class="p">,</span>
            <span class="nt">&quot;documents&quot;</span><span class="p">:</span> <span class="p">[</span><span class="err">string</span><span class="p">],</span>
            <span class="nt">&quot;user_infos&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;user_company_vat&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
                    <span class="nt">&quot;user_company_name&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
                    <span class="nt">&quot;user_company_country_code&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
                    <span class="nt">&quot;user_lang&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
                    <span class="nt">&quot;user_email&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
            <span class="p">},</span>
    <span class="p">},</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">string</span> <span class="err">(hex)</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div></section><section id="response"><h5 >Response</h5><dl ><dt ><code >jsonrpc</code></dt><dd >A string specifying the version of the JSON-RPC protocol. It will be “2.0”.</dd><dt ><code >id</code></dt><dd >The identifier you set in the request body.</dd><dt ><code >result</code></dt><dd ><dl ><dt ><code >status_code</code></dt><dd >The code indicating the status of the request. <code >status_code</code> is 0 in case of success. Other <code >status_code</code> are detailed in the table below.</dd><dt ><code >status_msg</code></dt><dd >A string giving verbose details about the request status.</dd><dt ><code >document_id</code></dt><dd >Only present if the request is successful.</dd></dl></dd></dl><div role="alert" class="alert alert-info"><h3 class="alert-title">Note</h3><p >The API does not actually use the JSON-RPC error scheme. Instead the API has its own error scheme bundled inside a successful JSON-RPC result.</p></div><table class="table"><thead ><tr ><th >status_code</th><th >status_msg</th></tr></thead><tbody ><tr ><td >0</td><td >Success</td></tr><tr ><td >2</td><td >An error occured</td></tr><tr ><td >3</td><td >You don’t have enough credit</td></tr><tr ><td >6</td><td >Unsupported file format</td></tr><tr ><td >9</td><td >Server is currently under maintenance. Please try again later.</td></tr></tbody></table><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;status_code&quot;</span><span class="p">:</span> <span class="err">int</span><span class="p">,</span>
        <span class="nt">&quot;status_msg&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
        <span class="nt">&quot;document_id&quot;</span><span class="p">:</span> <span class="err">int</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div></section><section id="iap-invoice-extract-get-results"><i id="webservices-extract-api-invoice-get-results"></i><h4 ><code >/iap/invoice_extract/get_results</code></h4></section><section id="id1"><h5 >Description</h5><p >Request the results of the documents ids obtained with the <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a> route. Can either return the results or a “request pending” message.</p></section><section id="id2"><h5 >Request Body</h5><dl ><dt ><code >jsonrpc</code> (required)</dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >method</code> (required)</dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >id</code> (required)</dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >params</code>:</dt><dd ><dl ><dt ><code >version</code> (required)</dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >documents_ids</code> (required)</dt><dd >The list of <code >document_id</code> for which you want to get the current parsing status.</dd></dl></dd></dl><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="err">int</span><span class="p">,</span>
        <span class="nt">&quot;documents_ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="err">int</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">string</span> <span class="err">(hex)</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div></section><section id="id3"><h5 >Response</h5><dl ><dt ><code >jsonrpc</code></dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >id</code></dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >result</code></dt><dd ><p >Dictionary where each key is a document_id. For each <code >document_id</code>:</p><dl ><dt ><code >status_code</code></dt><dd >The code indicating the status of the request. <code >status_code</code> is 0 in case of success. Other <code >status_code</code> are detailed in the table below.</dd><dt ><code >status_msg</code></dt><dd >A string giving verbose details about the request status.</dd><dt ><code >results</code></dt><dd >Only present if the request is successful.</dd></dl></dd></dl><div role="alert" class="alert alert-warning"><h3 class="alert-title">Warning</h3><p >result keys are strings despite the fact that the document_ids given in the request body are integers.</p></div><table class="table"><thead ><tr ><th >status_code</th><th >status_msg</th></tr></thead><tbody ><tr ><td >0</td><td >Success</td></tr><tr ><td >1</td><td >Not ready</td></tr><tr ><td >2</td><td >An error occured</td></tr><tr ><td >9</td><td >Server is currently under maintenance. Please try again later.</td></tr></tbody></table><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;document_id_1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;status_code&quot;</span><span class="p">:</span> <span class="err">int</span><span class="p">,</span>
            <span class="nt">&quot;status_msg&quot;</span><span class="p">:</span> <span class="err">str</span><span class="p">,</span>
            <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;feature_1_name&quot;</span><span class="p">:</span> <span class="err">feature_</span><span class="mi">1</span><span class="err">_result</span><span class="p">,</span>
                         <span class="nt">&quot;feature_2_name&quot;</span><span class="p">:</span> <span class="err">feature_</span><span class="mi">2</span><span class="err">_result</span><span class="p">,</span>
                         <span class="err">…</span>
                        <span class="p">}]</span>
            <span class="p">},</span>
        <span class="nt">&quot;document_id_2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;status_code&quot;</span><span class="p">:</span> <span class="err">int</span><span class="p">,</span>
            <span class="nt">&quot;status_msg&quot;</span><span class="p">:</span> <span class="err">str</span><span class="p">,</span>
            <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;feature_1_name&quot;</span><span class="p">:</span> <span class="err">feature_</span><span class="mi">1</span><span class="err">_result</span><span class="p">,</span>
                         <span class="nt">&quot;feature_2_name&quot;</span><span class="p">:</span> <span class="err">feature_</span><span class="mi">2</span><span class="err">_result</span><span class="p">,</span>
                         <span class="err">…</span>
                        <span class="p">}]</span>
            <span class="p">},</span>
            <span class="err">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div></section><section id="feature-result"><i id="webservices-extract-api-invoice-get-results-feature-result"></i><h4 ><code >feature_result</code></h4><p >Each field of interest we want to extract from the invoice such as the total or the due date are also called features. An exhaustive list of all the extracted features can be found in the table below.</p><p >For each feature, we return a list of candidates and we spotlight the candidate our model predicts to be the best fit for the feature.</p><dl ><dt ><code >selected_value</code></dt><dd >The best candidate for this feature.</dd><dt ><code >words</code></dt><dd >List of all the candidates for this feature ordered by decreasing score.</dd></dl><div class="doc-aside"><div class="content-switcher"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;selected_value&quot;</span><span class="p">:</span> <span class="err">candidate_</span><span class="mi">12</span><span class="p">,</span>
    <span class="nt">&quot;words&quot;</span><span class="p">:</span> <span class="p">[</span><span class="err">candidate_</span><span class="mi">12</span><span class="p">,</span> <span class="err">candidate_</span><span class="mi">3</span><span class="p">,</span> <span class="err">candidate_</span><span class="mi">4</span><span class="p">,</span><span class="err">...</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div></div></section><section id="candidate"><h4 ><code >candidate</code></h4><p >For each candidate we give its representation and position in the document. Candidates are sorted by decreasing order of suitability.</p><dl ><dt ><code >content</code></dt><dd >Representation of the candidate.</dd><dt ><code >coords</code></dt><dd ><code >[center_x, center_y, width, height, rotation_angle]</code>. The position and dimensions are relative to the size of the page and are therefore between 0 and 1.
The angle is a clockwise rotation measured in degrees.</dd><dt ><code >page</code></dt><dd >Page of the original document on which the candidate is located (starts at 0).</dd></dl><div class="doc-aside"><div class="content-switcher"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="err">string|float</span><span class="p">,</span>
    <span class="nt">&quot;coords&quot;</span><span class="p">:</span> <span class="p">[</span><span class="err">float</span><span class="p">,</span> <span class="err">float</span><span class="p">,</span> <span class="err">float</span><span class="p">,</span> <span class="err">float</span><span class="p">,</span> <span class="err">float</span><span class="p">],</span>
    <span class="nt">&quot;page&quot;</span><span class="p">:</span> <span class="err">int</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div></div><table class="table"><thead ><tr ><th >Feature name</th><th >Specifities</th></tr></thead><tbody ><tr ><td ><code >SWIFT_code</code></td><td ><p ><strong >content</strong> is a dictionary encoded as a string.</p><p >It contains information about the detected SWIFT code
(or <a href="https://www.iso9362.org/isobic/overview.html" class="external reference">BIC</a>).</p><p >Keys:</p><dl ><dt ><code >bic</code></dt><dd >detected BIC (string).</dd><dt ><code >name</code> (optional)</dt><dd >bank name (string).</dd><dt ><code >country_code</code></dt><dd >ISO3166 alpha-2 country code of the bank (string).</dd><dt ><code >city</code> (optional)</dt><dd >city of the bank (string).</dd><dt ><code >verified_bic</code></dt><dd >True if the BIC has been found in our DB (bool).</dd></dl><p >Name and city are present only if verified_bic is true.</p></td></tr><tr ><td ><code >VAT_Number</code></td><td ><strong >content</strong> is a string</td></tr><tr ><td ><code >country</code></td><td ><strong >content</strong> is a string</td></tr><tr ><td ><code >currency</code></td><td ><strong >content</strong> is a string</td></tr><tr ><td ><code >date</code></td><td ><p ><strong >content</strong> is a string</p><p >Format : <em >YYYY-MM-DD HH:MM:SS</em></p></td></tr><tr ><td ><code >due_date</code></td><td >Same as for <code >date</code></td></tr><tr ><td ><code >global_taxes</code></td><td ><p ><strong >content</strong> is a float</p><p ><strong >candidate</strong> has an additional field <code >amount_type</code>. Its value is always percent.</p><p ><strong >selected_values</strong> is a list of candidates.</p></td></tr><tr ><td ><code >global_taxes_amount</code></td><td ><strong >content</strong> is a float</td></tr><tr ><td ><code >invoice_id</code></td><td ><strong >content</strong> is a string</td></tr><tr ><td ><code >subtotal</code></td><td ><strong >content</strong> is a float</td></tr><tr ><td ><code >total</code></td><td ><strong >content</strong> is a float</td></tr><tr ><td ><code >supplier</code></td><td ><strong >content</strong> is a string</td></tr></tbody></table></section><section id="feature-result-for-the-invoice-lines-feature"><h4 ><code >feature_result</code> for the <code >invoice_lines</code> feature</h4><p >It follows a more specific structure. It is basically a list of dictionaries where each dictionary represents an invoice line. Each value follows
a <a href="#webservices-extract-api-invoice-get-results-feature-result" class="reference internal"><span class="std-ref std">feature_result</span></a> structure.</p><div class="doc-aside"><div class="content-switcher"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;discount&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;product&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;quantity&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;subtotal&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;total&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;taxes&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;total&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="err">feature_result</span><span class="p">,</span>
        <span class="nt">&quot;unit_price&quot;</span><span class="p">:</span> <span class="err">feature_result</span>
    <span class="p">},</span>
    <span class="err">...</span>
<span class="p">]</span>
</pre></div>
</div>
</div></div></div></section><section id="iap-invoice-extract-validate"><i id="webservices-extract-api-invoice-validate"></i><h4 ><code >/iap/invoice_extract/validate</code></h4></section><section id="id4"><h5 >Description</h5><p >Route that validates the different features of an invoice. The validation step is an optional step but is strongly recommended. By telling the system if it were right or wrong for each
feature you give an important feedback. It has no direct impact but it helps the system to greatly improve its prediction accuracy for the invoices you will send in the future.</p></section><section id="id5"><h5 >Request Body</h5><dl ><dt ><code >jsonrpc</code> (required)</dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >method</code> (required)</dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >params</code></dt><dd ><dl ><dt ><code >documents_id</code> (required)</dt><dd >Id of the document for which you want to validate the result.</dd><dt ><code >values</code></dt><dd >Contains the validation for each feature. The field <code >merged_line</code> indicates if the <code >invoice_lines</code> have been merged or not.</dd></dl></dd></dl><div role="alert" class="alert alert-info"><h3 class="alert-title">Note</h3><p >You don’t have to validate all the features in order for the validation to succeed. However <a href="#webservices-extract-api-invoice-validate" class="alert-link reference internal"><span class="std-ref std">/validate</span></a> can’t be called multiple times for a same invoice.
Therefore you should validate all the features you want to validate at once.</p></div><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;document_id&quot;</span><span class="p">:</span> <span class="err">int</span><span class="p">,</span>
        <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;merged_lines&quot;</span><span class="p">:</span> <span class="err">bool</span>
            <span class="s2">&quot;feature_name_1&quot;</span><span class="p">:</span> <span class="err">validation_</span><span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;feature_name_2&quot;</span><span class="p">:</span> <span class="err">validation_</span><span class="mi">2</span><span class="p">,</span>
            <span class="err">...</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">string</span> <span class="err">(hex)</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div></section><section id="validation"><h4 ><code >validation</code></h4><p >A <strong >validation</strong> for a given feature is a dictionary containing the textual representation of the expected value for this given feature.
This format apply for all the features except for <code >global_taxes</code> and <code >invoice_lines</code> which have more complex validation format.</p><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="err">string|float</span> <span class="p">}</span>
</pre></div>
</div>
</div></div></section><section id="validation-for-global-taxes"><h4 >validation for <code >global_taxes</code></h4><p ><strong >content</strong> is a list of dictionaries. Each dictionary represents a tax:</p><dl ><dt ><code >amount</code></dt><dd >Amount on which the tax is applied.</dd><dt ><code >tax_amount</code></dt><dd >Amount of the tax.</dd><dt ><code >tax_amount_type</code></dt><dd >Indicates if the <code >tax_amount</code> is a percentage or a fixed value. The type must be specified using the literal string “fixed” or “percent”.</dd><dt ><code >tax_price_include</code></dt><dd >Indicates if <code >amount</code> already contains the tax or not.</dd></dl><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="err">float</span><span class="p">,</span>
        <span class="nt">&quot;tax_amount&quot;</span><span class="p">:</span> <span class="err">float</span><span class="p">,</span>
        <span class="nt">&quot;tax_amount_type&quot;</span><span class="p">:</span> <span class="s2">&quot;fixed&quot;</span><span class="err">|</span><span class="s2">&quot;percent&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tax_price_include&quot;</span><span class="p">:</span> <span class="err">bool</span>
    <span class="p">},</span>
    <span class="err">...</span>
<span class="p">]}</span>
</pre></div>
</div>
</div></div></section><section id="validation-for-invoice-lines"><h4 >validation for <code >invoice_lines</code></h4><p ><strong >lines</strong> is a list of dictionaries. Each dictionary represents an invoice line. The dictionary keys speak for themselves.</p><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;lines&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
        <span class="nt">&quot;quantity&quot;</span><span class="p">:</span> <span class="err">float</span><span class="p">,</span>
        <span class="nt">&quot;unit_price&quot;</span><span class="p">:</span> <span class="err">float</span><span class="p">,</span>
        <span class="nt">&quot;product&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
        <span class="nt">&quot;taxes_amount&quot;</span><span class="p">:</span> <span class="err">float</span><span class="p">,</span>
        <span class="nt">&quot;taxes&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="err">float</span><span class="p">,</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fixed&quot;</span><span class="err">|</span><span class="s2">&quot;percent&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;price_include&quot;</span><span class="p">:</span> <span class="err">bool</span>
                    <span class="p">},</span>
                    <span class="err">...</span>
                <span class="p">],</span>
        <span class="nt">&quot;subtotal&quot;</span><span class="p">:</span> <span class="err">float</span><span class="p">,</span>
        <span class="nt">&quot;total&quot;</span><span class="p">:</span> <span class="err">float</span>
    <span class="p">},</span>
    <span class="err">...</span>
<span class="p">]}</span>
</pre></div>
</div>
</div></div></section><section id="id6"><h3 >Response</h3><dl ><dt ><code >jsonrpc</code></dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >id</code></dt><dd >Same as for <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a>.</dd><dt ><code >result</code></dt><dd ><dl ><dt ><code >status_code</code></dt><dd >The code indicating the status of the request. <code >status_code</code> is 0 in case of success. Other <code >status_code</code> are detailed in the table below.</dd><dt ><code >status_msg</code></dt><dd >A string giving verbose details about the request status.</dd></dl></dd></dl><table class="table"><thead ><tr ><th >status_code</th><th >status_msg</th></tr></thead><tbody ><tr ><td >0</td><td >Success</td></tr><tr ><td >12</td><td >Validation format is incorrect</td></tr></tbody></table><div class="doc-aside content-switcher setup"><ul ><li >JSON</li></ul><div class="tabs"><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;status_code&quot;</span><span class="p">:</span> <span class="err">int</span><span class="p">,</span>
        <span class="nt">&quot;status_msg&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div></section><section id="integration-testing"><i id="webservices-extract-api-integration-testing"></i><h2 >Integration Testing</h2><p >You can test your integration by using <em >integration_token</em> as <code >account_token</code> in the <a href="#webservices-extract-api-invoice-parse" class="reference internal"><span class="std-ref std">/parse</span></a> request.</p><p >Using this token put you in test mode and allows you to simulate the entire flow without really parsing a document and without being billed one credit for each successful invoice parsing.</p><p >The only technical differences in test mode is that the document you send is not parsed by the system and that the response you get from <a href="#webservices-extract-api-invoice-get-results" class="reference internal"><span class="std-ref std">/get_results</span></a>
is a hard-coded one.</p><p >A python implementation of the full flow can be found <a class="reference download internal" href="../_downloads/ca8fc9e87f0da0b974fa1b9c014ecbc0/extract_api_implementation.py" download="">here</a>.</p></section>

          </article>
        </div>
        
        <div id="mask"></div>
      </main>
  </div>

  <div class="floating_action_container">
    <a id="floating_action" class="ripple" href="#">
      <i class="mdi-action-explore"></i>
    </a>
    <div id="floating_action_menu">
      <span class="bubble"></span>
      <ul class="list-group content">
        <li class="list-group-item ripple"><a>Cras justo odio</a></li>
        <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
        <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
        <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
        <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
      </ul>
    </div>
  </div>
  <footer>
    <div id="footer" class="container">
      <span class="o_logo o_logo_inverse center-block o_footer_logo"></span>
      <div class="row">
        <div class="col-sm-7 col-md-7 col-lg-6">
          <div class="row">
            <div class="col-xs-6 col-sm-4">
              <span class="menu_title">Community</span>
              <ul>
                <li><a href="https://github.com/odoo/odoo">Github</a></li>
                <li><a href="http://www.odoo.com/page/download">Download</a></li>
                <li class="divider"></li>
                <li><a href="https://runbot.odoo.com">Runbot</a></li>
                <li><a href="https://github.com/odoo/odoo/wiki/Translations">Translations</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/odoo-community">Mailing Lists</a></li>
                <li><a href="http://www.odoo.com/forum/help-1">Forum</a></li>
              </ul>
            </div>
            <div class="col-xs-6 col-sm-4">
              <span class="menu_title">Services</span>
              <ul>
                <li><a href="https://www.odoo.sh">Odoo Cloud Platform</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/help">Support</a></li>
                <li><a href="https://upgrade.odoo.com">Upgrade</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/partners">Find a partner</a></li>
                <li><a href="http://www.odoo.com/page/become-a-partner">Become a partner</a></li>
                <li class="divider"></li>
                <li><a href="http://training.odoo.com/courses/odoo-functional">Training Center</a></li>
                <li><a href="http://www.odoo.com/page/education-program">Education</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/security">Security</a></li>
              </ul>
            </div>
            <div class="col-xs-12 col-sm-4 mb64">
              <span class="menu_title">About us</span>
              <ul>
                <li><a href="http://www.odoo.com/page/about-us">Our company</a></li>
                <li><a href="http://www.odoo.com/page/contactus">Contact</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/event">Events</a></li>
                <li><a href="http://www.odoo.com/blog">Blog</a></li>
                <li><a href="http://www.odoo.com/blog/6">Customers</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/jobs">Jobs</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/page/legal">Legal</a> | <a href="http://www.odoo.com/privacy">Privacy</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-sm-5 col-md-4 col-md-offset-1 col-lg-5 col-lg-offset-1">
          <p>
            <small>
              Odoo is a suite of open source business apps that cover all your company needs: CRM, eCommerce, accounting, inventory, point of sale, project management, etc.
              <br/><br/>
              Odoo's unique value proposition is to be at the same time very easy to use and fully integrated.
            </small>
          </p>
        </div>
      </div>
    </div>
    <div class="o_footer_bottom">
      <div class="container">
        <a class="small" href="http://www.odoo.com/page/website-builder">Website made with <span class="o_logo o_logo_inverse o_logo_15"></span></a>
        <div class="social-links pull-right">
          <a href="http://www.odoo.com/web/about/facebook"><i class="fa fa-facebook"></i></a>
          <a href="http://www.odoo.com/web/about/twitter"><i class="fa fa-twitter"></i></a>
          <a href="http://www.odoo.com/web/about/linkedin"><i class="fa fa-linkedin"></i></a>
          <a href="mailto:info@odoo.com"><i class="fa fa-envelope"></i></a>
        </div>
      </div>
    </div>
  </footer>
  </body>
</html>